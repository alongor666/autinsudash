# 开发进度.md

> 最近更新：2025-10-05（提交代码前请同步校准时间）

## 版本概览
- 当前阶段：M0 核心 KPI 仪表板 MVP
- 数据形态：本地 CSV 上传 + IndexedDB 本地缓存，无后端接口
- 必须对齐文档：`README.md`（快速开始与数据规范）、`prd.md`（体验蓝图）、`开发进度.md`（本文档）

## 已上线功能
| 模块 | 状态 | 最近更新时间 | 关键说明 | 相关文件 |
| :--- | :--- | :--- | :--- | :--- |
| 前端基础设施 | ✅ | 2024-09-22 | Next.js 14 + TypeScript 项目初始化，整合 Tailwind + shadcn/ui 与 App Router 布局 | `package.json`、`src/app/layout.tsx` |
| 数据导入与缓存 | ✅ | 2024-09-22 | 支持 CSV 上传解析，并通过 IndexedDB 持久化上次数据 | `src/app/page.tsx`、`src/lib/csv.ts`、`src/lib/idb.ts` |
| KPI 计算与环比 | ✅ | 2024-09-23 | 计算 4 项核心 KPI，并对比上一周数据生成变动幅度 | `src/lib/utils.ts`、`src/components/dashboard/kpi-grid.tsx` |
| 智能筛选面板 | ✅ | 2024-09-28 | 合并多维筛选入口，提供客户类别组合快捷按钮 | `src/components/dashboard/top-filters.tsx`、`src/lib/data.ts` |
| 图表展示能力 | ✅ | 2025-10-04 | 旭日图支持内/外环绝对值指标切换，图表标题自动生成核心观点，条形图自动缩放极值避免视觉失衡，颜色映射保持一致 | `src/components/dashboard/main-chart.tsx`、`src/components/dashboard/customer-performance.tsx` |
| 视觉设计体系 | ✅ | 2025-10-05 | 全面采用 Apple 官网风格：SF Pro 字体、柔和渐变背景与玻璃质感卡片，组件/交互维持原功能 | `src/app/page.tsx`、`src/app/globals.css`、`src/components/ui/*` |
| 数据导出 | ✅ | 2024-10-05 | 导出当前筛选结果为 CSV，并在空数据时给出反馈 | `src/lib/csv.ts`、`src/app/page.tsx` |

## 进行中 / 待办
- [ ] 扩展 KPI 至 PRD 规划的 16 项，同时完善 `src/components/dashboard/kpi-grid.tsx` 与 `src/lib/utils.ts` 的计算与展示。
- [ ] 增补筛选维度：`renewal_status`、`vehicle_insurance_grade`、`highway_risk_grade`、`terminal_source` 等尚未接入 `Filters` 类型及 UI。
- [ ] 提供 CSV 模板下载入口（README 已描述但尚无实际下载链接）。
- [ ] 建立 Vitest / React Testing Library 基础测试与数据夹具，补齐自动化验证。
- [ ] 引入 Web Worker 或流式解析，避免大文件解析阻塞主线程（PRD 性能条目）。
- [ ] 完成同比/自定义对比分析与图表联动，目前仅支持“上一周”环比。

## 风险与阻塞
- 大体量 CSV 解析仍在主线程执行，需关注页面卡顿与浏览器崩溃风险。
- 缺乏端到端/视觉回归测试，回归验证完全依赖人工。
- Genkit 相关的智能搜索未启用，如后续恢复需重新梳理需求与权限。

## 已移除 / 待清理
- `src/ai/flows/predictive-filter-suggestions.ts` 已标注“即将移除”，AI 预测筛选功能暂未上线。
- 样例文件 `2025保单第38周变动成本明细表.csv` 已从仓库删除，保留方式改为本地脱敏数据；更新 `public/data` 结构时需同步 README。

## 文档同步要求
- 每次功能上线或调整后，务必同时更新 `README.md`、`prd.md` 及本文件，确保描述与代码一致。
- 在 `开发进度.md` 中保持 ✅ / 🚧 / ⏸ 状态标记，并注明未完成或已淘汰能力。
- PR 中提醒评审关注文档是否同步，避免错漏。
